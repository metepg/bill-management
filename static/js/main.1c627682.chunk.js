(this.webpackJsonpconcourse=this.webpackJsonpconcourse||[]).push([[0],{33:function(e,t,r){},34:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),a=r.n(c),i=r(16),l=r.n(i),u=(r(33),r(8)),o=r(14),s=r(9),d=r(10),j=r(6);var b=function(e,t){return t.some((function(t){return t.groupName.toLowerCase()===e.toLowerCase()}))},m=function(e){return JSON.parse(localStorage.getItem(e))},p=function(e,t){return localStorage.setItem(e,JSON.stringify(t))};var h=function(e){var t=e,r=t.groupName;return delete t.groupName,{groupName:r,users:Object.values(e)}};var O=function(e){var t=h(e),r=m("savedGroups");if(!r){var n=t;return p("currentGroup",n),p("savedGroups",[n]),!0}return b(t.groupName,r)?(alert("Group name already exists!"),!1):(r.push(t),p("savedGroups",r),p("currentGroup",t),!0)};r(34);var x=function(e){var t=e.changePage;return Object(n.jsxs)(j.a,{onSubmit:function(e){e.preventDefault();var r=new FormData(e.target),n=Object.fromEntries(r.entries());O(n)&&t("page2","bills")},children:[Object(n.jsxs)(j.a.Group,{controlId:"groupName",children:[Object(n.jsx)(j.a.Label,{children:"Group name"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"The meters",name:"groupName",defaultValue:"The Meters"})]}),Object(n.jsxs)(j.a.Group,{controlId:"users",children:[Object(n.jsx)(j.a.Label,{children:"Users"}),Object(n.jsx)(j.a.Control,{required:!0,type:"text",placeholder:"User 1",name:"user1",defaultValue:"eka nimi"}),Object(n.jsx)(j.a.Control,{required:!0,type:"text",placeholder:"User 2",name:"user2",defaultValue:"toka nimi"}),Object(n.jsx)(j.a.Control,{required:!0,type:"text",placeholder:"User 3",name:"user3",defaultValue:"kolmas nimi"})]}),Object(n.jsx)(d.a,{variant:"primary",type:"submit",children:"Submit"})]})};var f=function(e){return m("savedGroups").find((function(t){return t.groupName===e}))};var v=function(e){var t=e.changePage,r=m("savedGroups");return r=r?r.map((function(e){return Object(n.jsx)("button",{onClick:function(){return r=e.groupName,p("currentGroup",f(r)),void t("page2","bills");var r},type:"button",children:e.groupName},e.groupName)})):Object(n.jsx)("h1",{children:"No groups found!"}),Object(n.jsx)("div",{style:{display:"flex",flexDirection:"column",margin:"5rem 3rem"},children:r})};var g=function(e){var t=e.tab,r=e.setTab,c=e.changePage;return Object(n.jsxs)(o.a,{transition:!1,id:"controlled",activeKey:t,onSelect:function(e){return r(e)},children:[Object(n.jsx)(s.a,{eventKey:"new",title:"New",children:Object(n.jsx)(x,{changePage:c})}),Object(n.jsx)(s.a,{eventKey:"load",title:"Load",children:Object(n.jsx)(v,{changePage:c})})]})},y=r(13),B=r(17);var N=function(e,t){var r=t.groupName,n=m(e),c=n.findIndex((function(e){return e.groupName===r}));n[c]=t,p(e,n)};function S(e){var t=e;return delete t.description,delete t.evenShares,delete t.total,Object.entries(t).map((function(e){var t=Object(u.a)(e,2);return{name:t[0],paid:t[1]}}))}var G=function(e,t){e.preventDefault();var r=t;r.current.disabled=!0;var n=new FormData(e.target),c=Object.fromEntries(n.entries()),a={description:c.description,total:Number(c.total),evenShares:!!c.evenShares,details:S(c)};return function(e,t){var r=e;"bills"in r?r.bills.push(t):r.bills=[t],p("currentGroup",r),N("savedGroups",r)}(m("currentGroup"),a),r.current.disabled=!1,alert("Saved"),!0};var F=function(e){var t,r=e.userNames,i=e.saveValue,l=e.totalSum,u=e.bills,o=e.setBill,s=Object(c.useRef)(),b=Object(c.useRef)();return Object(n.jsxs)(j.a,{ref:s,onSubmit:function(e){G(e,b)?s.current.reset():alert("Something went wrong!"),b.current.disabled=!1,o(u?u.length:0)},children:[Object(n.jsxs)(j.a.Label,{style:{fontSize:"1.5rem",marginBottom:"1rem"},onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null},children:["Title",Object(n.jsx)(j.a.Control,{type:"text",name:"description",required:!0,placeholder:"Bill title",onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}})]}),Object(n.jsx)(j.a.Group,{controlId:"usersPaid",children:(t=r,t.map((function(e){return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(j.a.Label,{children:e}),Object(n.jsx)(j.a.Control,{onBlur:function(e){return i(e.target)},onFocus:function(e){e.target.value=""},required:!0,name:e,type:"number",step:"0.01",placeholder:"0.00",onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}}),Object(n.jsx)("br",{})]},e)})))}),Object(n.jsxs)(j.a.Group,{controlId:"totalSum",children:[Object(n.jsx)(j.a.Label,{children:"Total sum:"}),Object(n.jsx)(j.a.Control,{type:"number",name:"total",step:"0.01",placeholder:"0.00",ref:l,tabIndex:-1,readOnly:!0})]}),Object(n.jsxs)(j.a.Label,{style:{marginBottom:"1rem"},children:["Even shares?",Object(n.jsx)("input",{name:"evenShares",style:{marginLeft:"0.5rem",marginRight:"0.4rem"},className:"toggle",type:"checkbox",defaultChecked:!0,onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}})]}),Object(n.jsx)("br",{}),Object(n.jsx)(d.a,{variant:"primary",type:"submit",ref:b,children:"Submit"})]})};r(39);var w=function(e){var t=e.bills,r=e.setBill,a=m("currentGroup").users,i=Object(c.useRef)(0),l={};return a.forEach((function(e){l[e]=0})),Object(n.jsx)("section",{className:"add-bill-controller",children:Object(n.jsx)(F,{saveValue:function(e){var t=function(e){return e.value=parseFloat(e.value).toFixed(2),e.value}(e);l=Object(B.a)(Object(B.a)({},l),{},Object(y.a)({},e.name,Number(t))),i.current.value=Number(Object.values(l).reduce((function(e,t){return e+t}))).toFixed(2)},userNames:a,usersPaid:l,totalSum:i,bills:t,setBill:r})})},C=r(22);var k=function(e){var t=e.currentBill,r=e.editBill;function c(e){var r,n=e,c=t.total,a=t.details.length;return(r=(n-c/a).toFixed(2))>=0?"+".concat(r):"".concat(r)}var i=t?t.details.map((function(e,t){return Object(n.jsx)(a.a.Fragment,{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:"".concat(e.paid," \u20ac")}),Object(n.jsx)("td",{style:{color:c(e.paid)>=0?"green":"red"},children:"".concat(c(e.paid)," \u20ac")})]})},"".concat(e.name).concat(1*t))})):null;return Object(n.jsx)(n.Fragment,{children:t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("button",{onClick:function(){return r()},type:"button",style:{all:"unset",cursor:"pointer",marginLeft:"20rem"},children:Object(n.jsx)("i",{className:"far fa-edit"})}),Object(n.jsxs)(C.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Paid"}),Object(n.jsx)("th",{children:"Change"})]})}),Object(n.jsx)("tbody",{children:i})]}),Object(n.jsx)("h4",{style:{textAlign:"center"},children:"Total ".concat(t.total.toFixed(2)," \u20ac")})]}):null})};var D=function(e){var t=e.currentBill,r=e.editBill,c=e.setBill,i=e.bills,l=i?i.map((function(e,t){return Object(n.jsx)(a.a.Fragment,{children:Object(n.jsx)("option",{value:t,children:"".concat(e.description," (").concat(e.total.toFixed(2)," \u20ac)")})},"".concat(1*t).concat(e.description))})):null;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("select",{style:{textAlign:"center"},value:t?i.findIndex((function(e){return e.description===t.description})):"",onChange:function(e){return c(e.target.value)},children:[Object(n.jsx)("option",{hidden:!0,children:"Select"}),l]}),Object(n.jsx)(k,{currentBill:t,editBill:r})]})};r(40);var E=function(e){var t=e.editBill,r=e.currentBill,a=e.setBill,i=Object(c.useState)(r?"showBill":"addBill"),l=Object(u.a)(i,2),d=l[0],j=l[1],b=m("currentGroup"),p=b.bills;return Object(n.jsxs)(o.a,{transition:!1,id:"controlled",activeKey:d,onSelect:function(e){return j(e)},style:{margin:"0.5rem 3rem",fontSize:"1rem",borderBottom:"none",marginTop:"0.5rem"},children:[Object(n.jsx)(s.a,{eventKey:"addBill",title:"Add bill",children:Object(n.jsx)(w,{setBill:a,bills:p})}),Object(n.jsx)(s.a,{eventKey:"showBill",title:"Show bills",children:p?Object(n.jsx)(D,{currentGroup:b,editBill:t,currentBill:r,bills:p,setBill:a}):Object(n.jsx)("h4",{children:"No bills saved"})})]})};var I=function(e,t,r){if(!e)return 0;var n=t.length,c=e.map((function(e){return e.total})).reduce((function(e,t){return e+t})),a=function(e,t){return e.findIndex((function(e){return e===t}))}(t,r),i=e.map((function(e){return Number(e.details[a].paid)})).reduce((function(e,t){return e+t}));return Math.round(100*(i-c/n))/100};var K=function(){var e=m("currentGroup"),t=e.groupName,r=e.users,c=e.bills,i=r.map((function(e,t){return Object(n.jsx)(a.a.Fragment,{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e}),Object(n.jsx)("td",{style:{color:I(c,r,r[t])>=0?"green":"red"},children:"".concat((i=I(c,r,r[t]),i>=0?"+".concat(i):"".concat(i))," \u20ac")})]})},"".concat(e.name).concat(1*t));var i}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:t}),Object(n.jsxs)(C.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Balance"})]})}),Object(n.jsx)("tbody",{children:i})]})]})};var L=function(e,t,r,n){var c=m("savedGroups"),a=m("currentGroup");t.details.forEach((function(e,t){e.paid=Object.values(r)[t].toFixed(2)})),t.total=Number(n);var i=e.bills.findIndex((function(e){return e.description===t.description}));a.bills[i]=t;var l=c.findIndex((function(t){return t.groupName===e.groupName}));return p("currentGroup",a),c[l]=a,p("savedGroups",c),!0};function T(e){var t=e.currentGroup,r=e.currentBill,i=e.editBill,l=Object(c.useRef)();var u={};function o(e){var t=Number(function(e){return e.value=Number(e.value).toFixed(2),e.value}(e));u=Object(B.a)(Object(B.a)({},u),{},Object(y.a)({},e.name,t)),l.current.value=Object.values(u).reduce((function(e,t){return e+t})).toFixed(2)}return r.details.forEach((function(e){u[e.name]=Number(e.paid)})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{style:{padding:"15%"},children:"Edit bill ".concat(r.description)}),Object(n.jsxs)(j.a,{onSubmit:function(e){return function(e){e.preventDefault(),L(t,r,u,l.current.value)?(alert("Changes saved!"),i()):alert("Something went wrong!")}(e)},style:{margin:"0 6rem"},children:[r.details.map((function(e,t){return Object(n.jsx)(a.a.Fragment,{children:Object(n.jsxs)(j.a.Group,{children:[Object(n.jsx)(j.a.Label,{children:e.name}),Object(n.jsx)(j.a.Control,{onBlur:function(e){return o(e.target)},onFocus:function(e){e.target.value=""},required:!0,name:e.name,type:"number",step:"0.01",placeholder:"0.00",defaultValue:e.paid})]})},"".concat(e.name).concat(1*t))})),Object(n.jsx)(j.a.Label,{children:"Total"}),Object(n.jsx)(j.a.Control,{type:"number",name:"total",step:"0.01",placeholder:"0.00",ref:l,tabIndex:-1,readOnly:!0,defaultValue:r.total.toFixed(2)}),Object(n.jsx)(d.a,{type:"submit",variant:"primary",children:"Save"}),Object(n.jsx)(d.a,{type:"reset",variant:"danger",onClick:function(){confirm("Stop editing and discard changes?")&&i()},children:"Discard"})]})]})}var P=a.a.memo(T);var V=function(e){var t=e.tab,r=e.setTab,a=e.changePage,i=e.setBill,l=e.currentBill,d=e.bills,j=e.currentGroup,b=Object(c.useState)(!1),m=Object(u.a)(b,2),p=m[0],h=m[1];function O(){h(!p)}return Object(n.jsx)(n.Fragment,{children:p?Object(n.jsx)(P,{editBill:O,currentBill:l,currentGroup:j}):Object(n.jsxs)(o.a,{transition:!1,id:"controlled",activeKey:t,onSelect:function(e){return r(e)},children:[Object(n.jsx)(s.a,{eventKey:"bills",title:"Bills",children:Object(n.jsx)(E,{editBill:O,setBill:i,currentBill:l,bills:d})}),Object(n.jsx)(s.a,{eventKey:"balance",title:"Balance",children:Object(n.jsx)(K,{})}),Object(n.jsx)(s.a,{eventKey:"exit",title:"Exit",children:Object(n.jsx)("button",{type:"button",onClick:function(){a("main","new"),i("")},style:{marginTop:"5rem",fontSize:"2rem"},children:"Exit"})})]})})};r(41),r(42);var q=function(){var e=Object(c.useState)("main"),t=Object(u.a)(e,2),r=t[0],a=t[1],i=Object(c.useState)("new"),l=Object(u.a)(i,2),o=l[0],s=l[1],d=Object(c.useState)(),j=Object(u.a)(d,2),b=j[0],p=j[1],h=m("currentGroup"),O=(h||[]).bills;function x(e,t){a(e),s(t)}return Object(c.useEffect)((function(){O=h?h.bills:[]}),[h]),Object(n.jsx)("main",{className:"app-container",children:Object(n.jsx)(n.Fragment,{children:"main"===r?Object(n.jsx)(g,{tab:o,setTab:s,changePage:x}):Object(n.jsx)(V,{tab:o,setTab:s,changePage:x,currentGroup:h,bills:O,currentBill:b,setBill:function(e){p(e?O[e]:"")}})})})};l.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(q,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1c627682.chunk.js.map