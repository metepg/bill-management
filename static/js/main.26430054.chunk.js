(this.webpackJsonpconcourse=this.webpackJsonpconcourse||[]).push([[0],{33:function(e,t,r){},34:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),i=r(13),o=r.n(i),l=(r(33),r(8)),u=r(9),s=r(15),j=r(17),d=r(6);var b=function(e,t){return t.some((function(t){return t.groupName.toLowerCase()===e.toLowerCase()}))},m=function(e){return JSON.parse(localStorage.getItem(e))},p=function(e,t){return localStorage.setItem(e,JSON.stringify(t))};var O=function(e){var t=e,r=t.groupName;return delete t.groupName,{groupName:r,users:Object.values(e)}};var h=function(e){var t=O(e),r=m("savedGroups");if(!r){var n=t;return p("currentGroup",n),p("savedGroups",[n]),!0}return b(t.groupName,r)?(alert("Group name already exists!"),!1):(r.push(t),p("savedGroups",r),p("currentGroup",t),!0)};r(34);var x=function(e){var t=e.changePage;return Object(n.jsxs)(d.a,{onSubmit:function(e){e.preventDefault();var r=new FormData(e.target),n=Object.fromEntries(r.entries());h(n)&&t("page2","bills")},children:[Object(n.jsxs)(d.a.Group,{controlId:"groupName",children:[Object(n.jsx)(d.a.Label,{children:"Group name"}),Object(n.jsx)(d.a.Control,{type:"text",placeholder:"The meters",name:"groupName",defaultValue:"The Meters"})]}),Object(n.jsxs)(d.a.Group,{controlId:"users",children:[Object(n.jsx)(d.a.Label,{children:"Users"}),Object(n.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"User 1",name:"user1",defaultValue:"eka nimi"}),Object(n.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"User 2",name:"user2",defaultValue:"toka nimi"}),Object(n.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"User 3",name:"user3",defaultValue:"kolmas nimi"})]}),Object(n.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]})};var f=function(e){return m("savedGroups").find((function(t){return t.groupName===e}))};var v=function(e){var t=e.changePage,r=m("savedGroups");return r=r?r.map((function(e){return Object(n.jsx)("button",{onClick:function(){return r=e.groupName,p("currentGroup",f(r)),void t("page2","bills");var r},type:"button",children:e.groupName},e.groupName)})):Object(n.jsx)("h1",{children:"No groups found!"}),Object(n.jsx)("div",{style:{display:"flex",flexDirection:"column",margin:"5rem 3rem"},children:r})},g=r(18),y=r(26);var S=function(e,t){var r=t.groupName,n=m(e),a=n.findIndex((function(e){return e.groupName===r}));n[a]=t,p(e,n)};function N(e){var t=e;return delete t.description,delete t.evenShares,delete t.total,Object.entries(t).map((function(e){var t=Object(l.a)(e,2);return{name:t[0],paid:t[1]}}))}var G=function(e,t){e.preventDefault();var r=t;r.current.disabled=!0;var n=new FormData(e.target),a=Object.fromEntries(n.entries()),c={description:a.description,total:Number(a.total),evenShares:!!a.evenShares,details:N(a)};return function(e,t){var r=e;"bills"in r?r.bills.push(t):r.bills=[t],p("currentGroup",r),S("savedGroups",r)}(m("currentGroup"),c),r.current.disabled=!1,alert("Saved"),!0};var w=function(e){var t,r=e.userNames,i=e.saveValue,o=e.totalSum,l=Object(a.useRef)(),u=Object(a.useRef)();return Object(n.jsxs)(d.a,{ref:l,onSubmit:function(e){G(e,u)?l.current.reset():alert("Something went wrong!"),u.current.disabled=!1},children:[Object(n.jsxs)(d.a.Label,{style:{fontSize:"1.5rem",marginBottom:"1rem"},onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null},children:["Title",Object(n.jsx)(d.a.Control,{type:"text",name:"description",required:!0,placeholder:"Bill title",onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}})]}),Object(n.jsx)(d.a.Group,{controlId:"usersPaid",children:(t=r,t.map((function(e){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(d.a.Label,{children:e}),Object(n.jsx)(d.a.Control,{onBlur:function(e){return i(e.target)},required:!0,name:e,type:"number",step:"0.01",placeholder:"0.00",onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}}),Object(n.jsx)("br",{})]},e)})))}),Object(n.jsxs)(d.a.Group,{controlId:"totalSum",children:[Object(n.jsx)(d.a.Label,{children:"Total sum:"}),Object(n.jsx)(d.a.Control,{type:"number",name:"total",step:"0.01",placeholder:"0.00",ref:o,tabIndex:-1,readOnly:!0})]}),Object(n.jsxs)(d.a.Label,{style:{marginBottom:"1rem"},children:["Even shares?",Object(n.jsx)("input",{name:"evenShares",style:{marginLeft:"0.5rem",marginRight:"0.4rem"},className:"toggle",type:"checkbox",defaultChecked:!0,onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():null}})]}),Object(n.jsx)("br",{}),Object(n.jsx)(j.a,{variant:"primary",type:"submit",ref:u,children:"Submit"})]})};r(38);function k(){var e=m("currentGroup").users,t=Object(a.useRef)(0),r={};return e.forEach((function(e){r[e]=0})),Object(n.jsx)("section",{className:"add-bill-controller",children:Object(n.jsx)(w,{saveValue:function(e){var n=Number(function(e){return e.value=parseFloat(e.value).toFixed(2),e.value}(e));r=Object(y.a)(Object(y.a)({},r),{},Object(g.a)({},e.name,n)),t.current.value=Number(Object.values(r).reduce((function(e,t){return e+t}))).toFixed(2)},userNames:e,usersPaid:r,totalSum:t})})}var C=c.a.memo(k),F=r(27);function K(e){var t=e.currentBill;var r=t?t.details.map((function(e,r){return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:"".concat(e.paid," \u20ac")}),Object(n.jsx)("td",{children:"".concat((a=e.paid,(a-t.total/t.details.length).toFixed(2))," \u20ac")})]})},"".concat(e.name).concat(1*r));var a})):null;return Object(n.jsx)(n.Fragment,{children:t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:t.description}),Object(n.jsxs)(F.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Paid"}),Object(n.jsx)("th",{children:"Change"})]})}),Object(n.jsx)("tbody",{children:r})]}),Object(n.jsx)("p",{style:{textAlign:"center"},children:"Total ".concat(t.total," \u20ac")})]}):null})}var D=c.a.memo(K);var B=function(e){return e.map((function(e){return Number(e.total)})).reduce((function(e,t){return e+t}))};var E=function(e){var t=e.currentGroup.bills,r=Object(a.useState)(),i=Object(l.a)(r,2),o=i[0],u=i[1],s=t?t.map((function(e,r){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("button",{type:"button",onClick:function(){return u(t[r])},children:e.description}),Object(n.jsx)("label",{htmlFor:"bills",children:"".concat(e.total," \u20ac")}),Object(n.jsx)("br",{})]},"".concat(1*r).concat(e.description))})):null,j=t?Object(n.jsx)("h4",{children:"Total: ".concat(B(t)," \u20ac")}):null;return Object(n.jsx)(n.Fragment,{children:t?Object(n.jsxs)(n.Fragment,{children:[s,j,Object(n.jsx)("hr",{}),Object(n.jsx)(D,{currentBill:o})]}):Object(n.jsx)("h4",{children:"No bills saved"})})};r(39);var L=function(){var e=Object(a.useState)("addBill"),t=Object(l.a)(e,2),r=t[0],c=t[1],i=m("currentGroup");return Object(n.jsxs)(s.a,{transition:!1,id:"controlled",activeKey:r,onSelect:function(e){return c(e)},style:{margin:"0.5rem 3rem",fontSize:"1rem",borderBottom:"none",marginTop:"0.5rem"},children:[Object(n.jsx)(u.a,{eventKey:"addBill",title:"Add bill",children:Object(n.jsx)(C,{})}),Object(n.jsx)(u.a,{eventKey:"showBill",title:"Show bills",children:Object(n.jsx)(E,{currentGroup:i})})]})};r(41),r(42);var I=function(){var e=Object(a.useState)("main"),t=Object(l.a)(e,2),r=t[0],c=t[1],i=Object(a.useState)("new"),o=Object(l.a)(i,2),j=o[0],d=o[1];function b(e,t){c(e),d(t)}return Object(n.jsx)("main",{className:"app-container",children:"main"===r?Object(n.jsxs)(s.a,{transition:!1,id:"controlled",activeKey:j,onSelect:function(e){return d(e)},children:[Object(n.jsx)(u.a,{eventKey:"new",title:"New",children:Object(n.jsx)(x,{changePage:b})}),Object(n.jsx)(u.a,{eventKey:"load",title:"Load",children:Object(n.jsx)(v,{changePage:b})})]}):Object(n.jsxs)(s.a,{transition:!1,id:"controlled",activeKey:j,onSelect:function(e){return d(e)},children:[Object(n.jsx)(u.a,{eventKey:"bills",title:"Bills",children:Object(n.jsx)(L,{})}),Object(n.jsx)(u.a,{eventKey:"manage",title:"Manage"}),Object(n.jsx)(u.a,{eventKey:"exit",title:"Exit",children:Object(n.jsx)("button",{type:"button",onClick:function(){return b("main","new")},style:{marginTop:"5rem",fontSize:"2rem"},children:"Exit"})})]})})};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.26430054.chunk.js.map